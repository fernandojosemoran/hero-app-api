import{A as H,B as v,C as q,E as j,F as V,G as ne,H as oe,Q as D,R as O,S as A,T as G,a as ee,g as te,h as re,i as P,j as K,na as ae,t as M,v as ie,w as R,x as l,y as k,z as T}from"./chunk-HA5GPMG5.js";import{$ as w,Ab as o,Bb as n,C as X,Cb as d,Hb as x,Jb as f,Lc as Z,Ub as a,Vb as h,Xa as p,Ya as b,_ as Y,da as J,f as y,ia as C,ja as I,n as W,pb as c,r as E,rb as L,wb as g}from"./chunk-LAEVFYIO.js";var U=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["auth-layout-page"]],decls:3,vars:0,consts:[[1,"grid","p-3"],[1,"col-12","mt-5","md:col-6","md:col-offset-3","md:mt-8"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),d(2,"router-outlet"),n()())},dependencies:[te],encapsulation:2,changeDetection:0})};var Q=class t{constructor(r){this._http=r}_baseUrl=ie.base_url_api;post(r,e,i){return this._http.post(`${this._baseUrl}${r}`,e,i).pipe(X(s=>W(s.error)))}static \u0275fac=function(e){return new(e||t)(J(ee))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})},N=class t{constructor(r){this._http=r}login(r,e,i){let s={withCredentials:!0};return this._http.post("/auth/login",{userName:r,email:e,password:i},s).pipe(E(m=>m.response))}register(r,e,i,s,m){let u={withCredentials:!0,headers:{"Content-Type":"application/json"}};return this._http.post("/auth/register",{userName:r,lastName:i,email:e,password:s,confirmPassword:m},u).pipe(E(_=>_.response))}logout(){this._http.post("/auth/logout")}refreshToken(){let r={withCredentials:!0,reportProgress:!0,headers:{Authorization:"True","Content-Type":"application/json"}};return this._http.post("/auth/refresh-token",null,r).pipe(E(e=>!e?.response||typeof e?.response=="string"?!1:e.response))}static \u0275fac=function(e){return new(e||t)(J(Q))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};function he(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessage("userName"))}}function ve(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessage("email"))}}function be(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessage("password"))}}var B=class t{constructor(r,e,i){this._authService=r;this._snackbarService=e;this._router=i}_passwordValidators=[l.maxLength(100),l.minLength(3),l.required];_userNameValidators=[l.maxLength(50),l.minLength(4),l.required];loginForm=new H({userName:new v("",{nonNullable:!0,validators:this._userNameValidators}),email:new v("",{nonNullable:!0,validators:[l.email,l.required]}),password:new v("",{nonNullable:!0,validators:this._passwordValidators})});getErrorMessage(r){let e=this.loginForm.get(r);return e?.hasError("required")?"This field is required.":e?.hasError("minlength")?`Must have at least ${e.errors?.minlength.requiredLength} characters.`:e?.hasError("maxlength")?`Should not exceed ${e.errors?.maxlength.requiredLength} characters.`:e?.hasError("email")?"The email address is not valid.":""}login(){let{email:r,password:e,userName:i}=this.loginForm.value;if(!this.loginForm.valid)return;let s=m=>{if(typeof m=="string")return this._snackbarService.openUnsuccessSnackbar(m);this._router.navigate(["/heroes/list"])};this._authService.login(i,r,e).subscribe(y(m=>s(m)))}static \u0275fac=function(e){return new(e||t)(b(N),b(D),b(re))};static \u0275cmp=C({type:t,selectors:[["auth-login-page"]],decls:23,vars:4,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput",""],[1,"text-red-200"],["formControlName","email","type","email","matInput",""],["formControlName","password","type","password","matInput",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/register"]],template:function(e,i){if(e&1&&(o(0,"form",0),x("submit",function(){return i.login()}),o(1,"h1",1),a(2,"Login"),n(),o(3,"mat-form-field")(4,"mat-label"),a(5,"UserName"),n(),d(6,"input",2),n(),c(7,he,2,1,"p",3),o(8,"mat-form-field")(9,"mat-label"),a(10,"Email"),n(),d(11,"input",4),n(),c(12,ve,2,1,"p",3),o(13,"mat-form-field")(14,"mat-label"),a(15,"Password"),n(),d(16,"input",5),n(),c(17,be,2,1,"p",3),o(18,"button",6),x("click",function(){return i.login()}),a(19,"Login"),n(),o(20,"div",7)(21,"a",8),a(22,"Create a account?"),n()()()),e&2){let s,m,u;L("formGroup",i.loginForm),p(7),g((s=i.loginForm.get("userName"))!=null&&s.invalid&&((s=i.loginForm.get("userName"))!=null&&s.touched)?7:-1),p(5),g((m=i.loginForm.get("email"))!=null&&m.invalid&&((m=i.loginForm.get("email"))!=null&&m.touched)?12:-1),p(5),g((u=i.loginForm.get("password"))!=null&&u.invalid&&((u=i.loginForm.get("password"))!=null&&u.touched)?17:-1)}},dependencies:[M,A,O,G,q,R,k,T,j,V,P],encapsulation:2})};function _e(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("userName"))}}function Ce(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("lastName"))}}function xe(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("email"))}}function Ne(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("password"))}}function Se(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("confirmPassword"))}}var $=class t{constructor(r,e){this._authService=r;this._snackbarService=e}registerForm=new H({userName:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(50),l.minLength(4)]}),lastName:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(50),l.minLength(4)]}),email:new v("",{nonNullable:!0,validators:[l.required,l.email]}),password:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(100),l.minLength(3)]}),confirmPassword:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(100),l.minLength(3)]})});getErrorMessages(r){let e=this.registerForm.get(r);return e?.hasError("required")?"Field is required.":e?.hasError("minlength")?`Must have at least ${e.errors?.minlength.requiredLength} characters.`:e?.hasError("maxlength")?`Should not exceed ${e.errors?.maxlength.requiredLength} characters.`:e?.hasError("email")?"The email address is not valid.":""}register(){let{userName:r,lastName:e,email:i,password:s,confirmPassword:m}=this.registerForm.value;this.registerForm.valid&&this._authService.register(r,i,e,s,m).subscribe(y(u=>u&&this._snackbarService.openUnsuccessSnackbar(u)))}static \u0275fac=function(e){return new(e||t)(b(N),b(D))};static \u0275cmp=C({type:t,selectors:[["auth-register-page"]],decls:33,vars:6,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput","","required",""],[1,"text-red-200"],["formControlName","lastName","type","text","matInput","","required",""],["formControlName","email","type","email","matInput","","required",""],["formControlName","password","type","password","matInput","","required",""],["formControlName","confirmPassword","type","password","matInput","","required",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/login"]],template:function(e,i){if(e&1&&(o(0,"form",0),x("submit",function(){return i.register()}),o(1,"h1",1),a(2,"Register"),n(),o(3,"mat-form-field")(4,"mat-label"),a(5,"User Name"),n(),d(6,"input",2),n(),c(7,_e,2,1,"p",3),o(8,"mat-form-field")(9,"mat-label"),a(10,"Last Name"),n(),d(11,"input",4),n(),c(12,Ce,2,1,"p",3),o(13,"mat-form-field")(14,"mat-label"),a(15,"Email"),n(),d(16,"input",5),n(),c(17,xe,2,1,"p",3),o(18,"mat-form-field")(19,"mat-label"),a(20,"Password"),n(),d(21,"input",6),n(),c(22,Ne,2,1,"p",3),o(23,"mat-form-field")(24,"mat-label"),a(25,"Confirm Password"),n(),d(26,"input",7),n(),c(27,Se,2,1,"p",3),o(28,"button",8),x("click",function(){return i.register()}),a(29,"Register"),n(),o(30,"div",9)(31,"a",10),a(32,"You already have an account?"),n()()()),e&2){let s,m,u,_,F;L("formGroup",i.registerForm),p(7),g((s=i.registerForm.get("userName"))!=null&&s.invalid&&((s=i.registerForm.get("userName"))!=null&&s.touched)?7:-1),p(5),g((m=i.registerForm.get("lastName"))!=null&&m.invalid&&((m=i.registerForm.get("lastName"))!=null&&m.touched)?12:-1),p(5),g((u=i.registerForm.get("email"))!=null&&u.invalid&&((u=i.registerForm.get("email"))!=null&&u.touched)?17:-1),p(5),g((_=i.registerForm.get("password"))!=null&&_.invalid&&((_=i.registerForm.get("password"))!=null&&_.touched)?22:-1),p(5),g((F=i.registerForm.get("confirmPassword"))!=null&&F.invalid&&((F=i.registerForm.get("confirmPassword"))!=null&&F.touched)?27:-1)}},dependencies:[M,A,O,G,q,R,k,T,ne,j,V,P],encapsulation:2})};var Fe=[{path:"",component:U,children:[{path:"login",component:B},{path:"register",component:$},{path:"**",redirectTo:"login"}]}],z=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=w({imports:[K.forChild(Fe),K]})};var pe=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=w({imports:[Z,ae,oe,z]})};export{N as a,pe as b};
