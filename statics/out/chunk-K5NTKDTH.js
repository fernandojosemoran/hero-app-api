import{A as q,B as v,C as j,E as V,F as D,G as ie,H as ne,Q as O,R as A,S as G,T as U,a as ee,g as te,h as P,i as R,j as J,na as oe,t as M,v as re,w as k,x as l,y as T,z as H}from"./chunk-THPRS76Q.js";import{$ as w,Ab as o,Bb as n,C as Q,Cb as d,Hb as x,Jb as f,Lc as Z,Ub as a,Vb as h,Xa as p,Ya as b,_ as W,da as X,f as y,ia as C,ja as I,n as K,pb as c,r as E,rb as L,wb as g}from"./chunk-LAEVFYIO.js";var B=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["auth-layout-page"]],decls:3,vars:0,consts:[[1,"grid","p-3"],[1,"col-12","mt-5","md:col-6","md:col-offset-3","md:mt-8"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1),d(2,"router-outlet"),n()())},dependencies:[te],encapsulation:2,changeDetection:0})};var N=class t{constructor(i){this._http=i}_baseUrl=re.base_url_api;httpPost(i,e,r){return this._http.post(`${this._baseUrl}${i}`,e,r).pipe(Q(s=>K(s.error)))}login(i,e,r){let s={withCredentials:!0};return this.httpPost("/auth/login",{userName:i,email:e,password:r},s).pipe(E(m=>m.response))}register(i,e,r,s,m){let u={withCredentials:!0,headers:{"Content-Type":"application/json"}};return this.httpPost("/auth/register",{userName:i,lastName:r,email:e,password:s,confirmPassword:m},u).pipe(E(_=>_?.response))}logout(){this.httpPost("/auth/logout")}refreshToken(){let i={withCredentials:!0,reportProgress:!0,headers:{Authorization:"True","Content-Type":"application/json"}};return this.httpPost("/auth/refresh-token",null,i).pipe(E(e=>!e?.response||typeof e?.response=="string"?!1:e.response))}static \u0275fac=function(e){return new(e||t)(X(ee))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};function fe(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessage("userName"))}}function he(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessage("email"))}}function ve(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessage("password"))}}var $=class t{constructor(i,e,r){this._authService=i;this._snackbarService=e;this._router=r}_passwordValidators=[l.maxLength(100),l.minLength(3),l.required];_userNameValidators=[l.maxLength(50),l.minLength(4),l.required];loginForm=new q({userName:new v("",{nonNullable:!0,validators:this._userNameValidators}),email:new v("",{nonNullable:!0,validators:[l.email,l.required]}),password:new v("",{nonNullable:!0,validators:this._passwordValidators})});getErrorMessage(i){let e=this.loginForm.get(i);return e?.hasError("required")?"This field is required.":e?.hasError("minlength")?`Must have at least ${e.errors?.minlength.requiredLength} characters.`:e?.hasError("maxlength")?`Should not exceed ${e.errors?.maxlength.requiredLength} characters.`:e?.hasError("email")?"The email address is not valid.":""}login(){let{email:i,password:e,userName:r}=this.loginForm.value;if(!this.loginForm.valid)return;let s=m=>{if(typeof m=="string")return this._snackbarService.openUnsuccessSnackbar(m);this._router.navigate(["/heroes/list"])};this._authService.login(r,i,e).subscribe(y(m=>s(m)))}static \u0275fac=function(e){return new(e||t)(b(N),b(O),b(P))};static \u0275cmp=C({type:t,selectors:[["auth-login-page"]],decls:23,vars:4,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput",""],[1,"text-red-200"],["formControlName","email","type","email","matInput",""],["formControlName","password","type","password","matInput",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/register"]],template:function(e,r){if(e&1&&(o(0,"form",0),x("submit",function(){return r.login()}),o(1,"h1",1),a(2,"Login"),n(),o(3,"mat-form-field")(4,"mat-label"),a(5,"UserName"),n(),d(6,"input",2),n(),c(7,fe,2,1,"p",3),o(8,"mat-form-field")(9,"mat-label"),a(10,"Email"),n(),d(11,"input",4),n(),c(12,he,2,1,"p",3),o(13,"mat-form-field")(14,"mat-label"),a(15,"Password"),n(),d(16,"input",5),n(),c(17,ve,2,1,"p",3),o(18,"button",6),x("click",function(){return r.login()}),a(19,"Login"),n(),o(20,"div",7)(21,"a",8),a(22,"Create a account?"),n()()()),e&2){let s,m,u;L("formGroup",r.loginForm),p(7),g((s=r.loginForm.get("userName"))!=null&&s.invalid&&((s=r.loginForm.get("userName"))!=null&&s.touched)?7:-1),p(5),g((m=r.loginForm.get("email"))!=null&&m.invalid&&((m=r.loginForm.get("email"))!=null&&m.touched)?12:-1),p(5),g((u=r.loginForm.get("password"))!=null&&u.invalid&&((u=r.loginForm.get("password"))!=null&&u.touched)?17:-1)}},dependencies:[M,G,A,U,j,k,T,H,V,D,R],encapsulation:2})};function be(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("userName"))}}function _e(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("lastName"))}}function Ce(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("email"))}}function xe(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("password"))}}function Ne(t,i){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),h(e.getErrorMessages("confirmPassword"))}}var z=class t{constructor(i,e,r){this._authService=i;this._snackbarService=e;this._router=r}registerForm=new q({userName:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(50),l.minLength(4)]}),lastName:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(50),l.minLength(4)]}),email:new v("",{nonNullable:!0,validators:[l.required,l.email]}),password:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(100),l.minLength(3)]}),confirmPassword:new v("",{nonNullable:!0,validators:[l.required,l.maxLength(100),l.minLength(3)]})});getErrorMessages(i){let e=this.registerForm.get(i);return e?.hasError("required")?"Field is required.":e?.hasError("minlength")?`Must have at least ${e.errors?.minlength.requiredLength} characters.`:e?.hasError("maxlength")?`Should not exceed ${e.errors?.maxlength.requiredLength} characters.`:e?.hasError("email")?"The email address is not valid.":""}register(){let{userName:i,lastName:e,email:r,password:s,confirmPassword:m}=this.registerForm.value;this.registerForm.valid&&this._authService.register(i,r,e,s,m).subscribe(y(u=>{if(u)return u==="true"?this._router.navigate(["/auth/login"]):this._snackbarService.openUnsuccessSnackbar(u)}))}static \u0275fac=function(e){return new(e||t)(b(N),b(O),b(P))};static \u0275cmp=C({type:t,selectors:[["auth-register-page"]],decls:33,vars:6,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput","","required",""],[1,"text-red-200"],["formControlName","lastName","type","text","matInput","","required",""],["formControlName","email","type","email","matInput","","required",""],["formControlName","password","type","password","matInput","","required",""],["formControlName","confirmPassword","type","password","matInput","","required",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/login"]],template:function(e,r){if(e&1&&(o(0,"form",0),x("submit",function(){return r.register()}),o(1,"h1",1),a(2,"Register"),n(),o(3,"mat-form-field")(4,"mat-label"),a(5,"User Name"),n(),d(6,"input",2),n(),c(7,be,2,1,"p",3),o(8,"mat-form-field")(9,"mat-label"),a(10,"Last Name"),n(),d(11,"input",4),n(),c(12,_e,2,1,"p",3),o(13,"mat-form-field")(14,"mat-label"),a(15,"Email"),n(),d(16,"input",5),n(),c(17,Ce,2,1,"p",3),o(18,"mat-form-field")(19,"mat-label"),a(20,"Password"),n(),d(21,"input",6),n(),c(22,xe,2,1,"p",3),o(23,"mat-form-field")(24,"mat-label"),a(25,"Confirm Password"),n(),d(26,"input",7),n(),c(27,Ne,2,1,"p",3),o(28,"button",8),x("click",function(){return r.register()}),a(29,"Register"),n(),o(30,"div",9)(31,"a",10),a(32,"You already have an account?"),n()()()),e&2){let s,m,u,_,F;L("formGroup",r.registerForm),p(7),g((s=r.registerForm.get("userName"))!=null&&s.invalid&&((s=r.registerForm.get("userName"))!=null&&s.touched)?7:-1),p(5),g((m=r.registerForm.get("lastName"))!=null&&m.invalid&&((m=r.registerForm.get("lastName"))!=null&&m.touched)?12:-1),p(5),g((u=r.registerForm.get("email"))!=null&&u.invalid&&((u=r.registerForm.get("email"))!=null&&u.touched)?17:-1),p(5),g((_=r.registerForm.get("password"))!=null&&_.invalid&&((_=r.registerForm.get("password"))!=null&&_.touched)?22:-1),p(5),g((F=r.registerForm.get("confirmPassword"))!=null&&F.invalid&&((F=r.registerForm.get("confirmPassword"))!=null&&F.touched)?27:-1)}},dependencies:[M,G,A,U,j,k,T,H,ie,V,D,R],encapsulation:2})};var Se=[{path:"",component:B,children:[{path:"login",component:$},{path:"register",component:z},{path:"**",redirectTo:"login"}]}],Y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=w({imports:[J.forChild(Se),J]})};var me=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=w({imports:[Z,oe,ne,Y]})};export{N as a,me as b};
