import{A as V,B as h,C as j,E as D,F as O,G as ne,H as oe,Q as A,R as G,S as U,T as B,a as te,g as re,h as M,i as R,j as K,na as ae,t as T,v as ie,w as k,x as l,y as H,z as q}from"./chunk-LXU5VJK2.js";import{$ as E,Bb as o,C as W,Cb as n,Db as d,Ib as N,Kb as f,Mc as ee,Vb as a,Wb as L,Xa as p,Xb as x,Ya as v,_ as X,da as Z,f as w,ia as _,ja as P,n as Q,pb as c,r as F,sb as I,xb as g}from"./chunk-ZIFPUKJ6.js";var $=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["auth-layout-page"]],decls:3,vars:0,consts:[[1,"grid","p-3"],[1,"col-12","mt-5","md:col-6","md:col-offset-3","md:mt-8"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),d(2,"router-outlet"),n()())},dependencies:[re],encapsulation:2,changeDetection:0})};var C=class t{constructor(r){this._http=r}_baseUrl=ie.base_url_api;httpPost(r,e,i){return this._http.post(`${this._baseUrl}${r}`,e,i).pipe(W(s=>Q(s.error)))}login(r,e,i){let s={withCredentials:!0};return this.httpPost("/auth/login",{userName:r,email:e,password:i},s).pipe(F(m=>m.response))}register(r,e,i,s,m){let u={withCredentials:!0,headers:{"Content-Type":"application/json"}};return this.httpPost("/auth/register",{userName:r,lastName:i,email:e,password:s,confirmPassword:m},u).pipe(F(b=>b.response))}logout(){this.httpPost("/auth/logout")}refreshToken(){let r={withCredentials:!0,reportProgress:!0,headers:{Authorization:"True","Content-Type":"application/json"}};return this.httpPost("/auth/refresh-token",null,r).pipe(F(e=>!e?.response||typeof e?.response=="string"?!1:e.response))}static \u0275fac=function(e){return new(e||t)(Z(te))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};function he(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),L(e.getErrorMessage("userName"))}}function ve(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),L(e.getErrorMessage("email"))}}function be(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),L(e.getErrorMessage("password"))}}var z=class t{constructor(r,e,i){this._authService=r;this._snackbarService=e;this._router=i}_passwordValidators=[l.maxLength(100),l.minLength(3),l.required];_userNameValidators=[l.maxLength(50),l.minLength(4),l.required];loginForm=new V({userName:new h("",{nonNullable:!0,validators:this._userNameValidators}),email:new h("",{nonNullable:!0,validators:[l.email,l.required]}),password:new h("",{nonNullable:!0,validators:this._passwordValidators})});getErrorMessage(r){let e=this.loginForm.get(r);return e?.hasError("required")?"This field is required.":e?.hasError("minlength")?`Must have at least ${e.errors?.minlength.requiredLength} characters.`:e?.hasError("maxlength")?`Should not exceed ${e.errors?.maxlength.requiredLength} characters.`:e?.hasError("email")?"The email address is not valid.":""}login(){let{email:r,password:e,userName:i}=this.loginForm.value;if(!this.loginForm.valid)return;let s=m=>{if(typeof m=="string")return this._snackbarService.openUnsuccessSnackbar(m);this._router.navigate(["/heroes/list"])};this._authService.login(i,r,e).subscribe(w(m=>s(m)))}static \u0275fac=function(e){return new(e||t)(v(C),v(A),v(M))};static \u0275cmp=_({type:t,selectors:[["auth-login-page"]],decls:23,vars:4,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput",""],["role","alert",1,"text-red-200"],["formControlName","email","type","email","matInput",""],["formControlName","password","type","password","matInput",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/register"]],template:function(e,i){if(e&1&&(o(0,"form",0),N("submit",function(){return i.login()}),o(1,"h1",1),a(2,"Login"),n(),o(3,"mat-form-field")(4,"mat-label"),a(5,"UserName"),n(),d(6,"input",2),n(),c(7,he,2,1,"p",3),o(8,"mat-form-field")(9,"mat-label"),a(10,"Email"),n(),d(11,"input",4),n(),c(12,ve,2,1,"p",3),o(13,"mat-form-field")(14,"mat-label"),a(15,"Password"),n(),d(16,"input",5),n(),c(17,be,2,1,"p",3),o(18,"button",6),N("click",function(){return i.login()}),a(19,"Login"),n(),o(20,"div",7)(21,"a",8),a(22,"Create an account?"),n()()()),e&2){let s,m,u;I("formGroup",i.loginForm),p(7),g((s=i.loginForm.get("userName"))!=null&&s.invalid&&((s=i.loginForm.get("userName"))!=null&&s.touched)?7:-1),p(5),g((m=i.loginForm.get("email"))!=null&&m.invalid&&((m=i.loginForm.get("email"))!=null&&m.touched)?12:-1),p(5),g((u=i.loginForm.get("password"))!=null&&u.invalid&&((u=i.loginForm.get("password"))!=null&&u.touched)?17:-1)}},dependencies:[T,U,G,B,j,k,H,q,D,O,R],encapsulation:2})};function _e(t,r){if(t&1&&(o(0,"p",3),a(1),n()),t&2){let e=f();p(),x(" ",e.getErrorMessage("userName")," ")}}function xe(t,r){if(t&1&&(o(0,"p",5),a(1),n()),t&2){let e=f();p(),x(" ",e.getErrorMessage("lastName")," ")}}function Ce(t,r){if(t&1&&(o(0,"p",7),a(1),n()),t&2){let e=f();p(),x(" ",e.getErrorMessage("email")," ")}}function Ne(t,r){if(t&1&&(o(0,"p",9),a(1),n()),t&2){let e=f();p(),x(" ",e.getErrorMessage("password")," ")}}function ye(t,r){if(t&1&&(o(0,"p",11),a(1),n()),t&2){let e=f();p(),x(" ",e.getErrorMessage("confirmPassword")," ")}}var Y=class t{constructor(r,e,i){this._authService=r;this._snackbarService=e;this._router=i}_userNameValidations=[l.required,l.maxLength(50),l.minLength(4)];_lastNameValidations=[l.required,l.maxLength(50),l.minLength(4)];_passwordValidations=[l.required,l.maxLength(100),l.minLength(3)];_confirmPassword=[l.required,l.maxLength(100),l.minLength(3)];registerForm=new V({userName:new h("",{nonNullable:!0,validators:this._userNameValidations}),lastName:new h("",{nonNullable:!0,validators:this._lastNameValidations}),email:new h("",{nonNullable:!0,validators:[l.required,l.email]}),password:new h("",{nonNullable:!0,validators:this._passwordValidations}),confirmPassword:new h("",{nonNullable:!0,validators:this._confirmPassword})});getErrorMessage(r){let e=this.registerForm.get(r);return e?.hasError("required")?"This field is required.":e?.hasError("minlength")?`Must have at least ${e.errors?.minlength.requiredLength} characters.`:e?.hasError("maxlength")?`Should not exceed ${e.errors?.maxlength.requiredLength} characters.`:e?.hasError("email")?"The email address is not valid.":""}register(){let{userName:r,lastName:e,email:i,password:s,confirmPassword:m}=this.registerForm.value;this.registerForm.valid&&this._authService.register(r,i,e,s,m).subscribe(w(u=>u==="true"?this._router.navigate(["/auth/login"]):u&&this._snackbarService.openUnsuccessSnackbar(u)))}static \u0275fac=function(e){return new(e||t)(v(C),v(A),v(M))};static \u0275cmp=_({type:t,selectors:[["auth-register-page"]],decls:33,vars:6,consts:[["role","form",1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","name","userName","type","text","matInput","","required","","aria-describedby","userName-error"],["id","userName-error","role","alert","aria-live","polite",1,"text-red-200"],["formControlName","lastName","name","lastName","type","text","matInput","","required","","aria-describedby","lastName-error"],["id","lastName-error","role","alert","aria-live","polite",1,"text-red-200"],["formControlName","email","name","email","type","email","matInput","","required","","aria-describedby","email-error"],["id","email-error","role","alert","aria-live","polite",1,"text-red-200"],["formControlName","password","name","password","type","password","matInput","","required","","aria-describedby","password-error"],["id","password-error","role","alert","aria-live","polite",1,"text-red-200"],["formControlName","confirmPassword","name","confirmPassword","type","password","matInput","","required","","aria-describedby","confirmPassword-error"],["id","confirmPassword-error","role","alert","aria-live","polite",1,"text-red-200"],["type","submit","mat-stroked-button",""],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/login"]],template:function(e,i){if(e&1&&(o(0,"form",0),N("submit",function(){return i.register()}),o(1,"h1",1),a(2,"Register"),n(),o(3,"mat-form-field")(4,"mat-label"),a(5,"User Name"),n(),d(6,"input",2),n(),c(7,_e,2,1,"p",3),o(8,"mat-form-field")(9,"mat-label"),a(10,"Last Name"),n(),d(11,"input",4),n(),c(12,xe,2,1,"p",5),o(13,"mat-form-field")(14,"mat-label"),a(15,"Email"),n(),d(16,"input",6),n(),c(17,Ce,2,1,"p",7),o(18,"mat-form-field")(19,"mat-label"),a(20,"Password"),n(),d(21,"input",8),n(),c(22,Ne,2,1,"p",9),o(23,"mat-form-field")(24,"mat-label"),a(25,"Confirm Password"),n(),d(26,"input",10),n(),c(27,ye,2,1,"p",11),o(28,"button",12),a(29,"Register"),n(),o(30,"div",13)(31,"a",14),a(32,"You already have an account?"),n()()()),e&2){let s,m,u,b,S;I("formGroup",i.registerForm),p(7),g((s=i.registerForm.get("userName"))!=null&&s.invalid&&((s=i.registerForm.get("userName"))!=null&&s.touched)?7:-1),p(5),g((m=i.registerForm.get("lastName"))!=null&&m.invalid&&((m=i.registerForm.get("lastName"))!=null&&m.touched)?12:-1),p(5),g((u=i.registerForm.get("email"))!=null&&u.invalid&&((u=i.registerForm.get("email"))!=null&&u.touched)?17:-1),p(5),g((b=i.registerForm.get("password"))!=null&&b.invalid&&((b=i.registerForm.get("password"))!=null&&b.touched)?22:-1),p(5),g((S=i.registerForm.get("confirmPassword"))!=null&&S.invalid&&((S=i.registerForm.get("confirmPassword"))!=null&&S.touched)?27:-1)}},dependencies:[T,U,G,B,j,k,H,q,ne,D,O,R],encapsulation:2})};var Se=[{path:"",component:$,children:[{path:"login",component:z},{path:"register",component:Y},{path:"**",redirectTo:"login"}]}],J=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=P({type:t});static \u0275inj=E({imports:[K.forChild(Se),K]})};var pe=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=P({type:t});static \u0275inj=E({imports:[ee,ae,oe,J]})};export{C as a,pe as b};
