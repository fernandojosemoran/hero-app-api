import{A as p,B as P,D as L,E as R,F as Q,G as W,P as k,Q as E,R as H,S as M,a as z,g as Y,h as J,i as S,j as U,ma as X,t as I,v as K,w,x as _,y as F,z as x}from"./chunk-LE74TO4F.js";import{$ as C,Ab as o,Bb as t,C as V,Cb as m,Hb as f,Lc as $,Ub as a,Ya as u,_ as A,da as G,f as h,ia as c,ja as y,n as q,r as v,rb as N}from"./chunk-LAEVFYIO.js";var j=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["auth-layout-page"]],decls:3,vars:0,consts:[[1,"grid","p-3"],[1,"col-12","mt-5","md:col-6","md:col-offset-3","md:mt-8"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),m(2,"router-outlet"),t()())},dependencies:[Y],encapsulation:2,changeDetection:0})};var B=class i{constructor(r){this._http=r}_baseUrl=K.base_url_api;post(r,e,n){return this._http.post(`${this._baseUrl}${r}`,e,n).pipe(V(s=>q(s.error)))}static \u0275fac=function(e){return new(e||i)(G(z))};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"})},d=class i{constructor(r){this._http=r}login(r,e,n){let s={withCredentials:!0};return this._http.post("/auth/login",{userName:r,email:e,password:n},s).pipe(v(l=>l.response))}register(r,e,n,s,l){let b={withCredentials:!0,headers:{"Content-Type":"application/json"}};return this._http.post("/auth/register",{userName:r,lastName:n,email:e,password:s,confirmPassword:l},b).pipe(v(ie=>ie.response))}logout(){this._http.post("/auth/logout")}refreshToken(){let r={withCredentials:!0,reportProgress:!0,headers:{Authorization:"True","Content-Type":"application/json"}};return this._http.post("/auth/refresh-token",null,r).pipe(v(e=>!e?.response||typeof e?.response=="string"?!1:e.response))}static \u0275fac=function(e){return new(e||i)(G(B))};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"})};var T=class i{constructor(r,e,n){this._authService=r;this._snackbarService=e;this._router=n}loginForm=new x({userName:new p("",{nonNullable:!0}),email:new p("",{nonNullable:!0}),password:new p("",{nonNullable:!0})});login(){let{email:r,password:e,userName:n}=this.loginForm.value;if(!this.loginForm.valid)return;let s=l=>{if(typeof l=="string")return this._snackbarService.open(l);this._router.navigate(["/heroes/list"])};this._authService.login(n,r,e).subscribe(h(l=>s(l)))}static \u0275fac=function(e){return new(e||i)(u(d),u(k),u(J))};static \u0275cmp=c({type:i,selectors:[["auth-login-page"]],decls:20,vars:1,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput",""],["formControlName","email","type","email","matInput",""],["formControlName","password","type","password","matInput",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/register"]],template:function(e,n){e&1&&(o(0,"form",0),f("submit",function(){return n.login()}),o(1,"h1",1),a(2,"Login"),t(),o(3,"mat-form-field")(4,"mat-label"),a(5,"User"),t(),m(6,"input",2),t(),o(7,"mat-form-field")(8,"mat-label"),a(9,"Email"),t(),m(10,"input",3),t(),o(11,"mat-form-field")(12,"mat-label"),a(13,"Password"),t(),m(14,"input",4),t(),o(15,"button",5),f("click",function(){return n.login()}),a(16,"Login"),t(),o(17,"div",6)(18,"a",7),a(19,"Create a account?"),t()()()),e&2&&N("formGroup",n.loginForm)},dependencies:[I,H,E,M,P,w,_,F,L,R,S],encapsulation:2})};var D=class i{constructor(r,e){this._authService=r;this._snackbarService=e}registerForm=new x({userName:new p("",{nonNullable:!0}),lastName:new p("",{nonNullable:!0}),email:new p("",{nonNullable:!0}),password:new p("",{nonNullable:!0}),confirmPassword:new p("",{nonNullable:!0})});register(){let{userName:r,lastName:e,email:n,password:s,confirmPassword:l}=this.registerForm.value;this.registerForm.valid&&this._authService.register(r,n,e,s,l).subscribe(h(b=>b&&this._snackbarService.open(b)))}static \u0275fac=function(e){return new(e||i)(u(d),u(k))};static \u0275cmp=c({type:i,selectors:[["auth-register-page"]],decls:28,vars:1,consts:[[1,"flex","flex-column",3,"submit","formGroup"],[1,"text-2xl","mb-4"],["formControlName","userName","type","text","matInput","","required",""],["formControlName","lastName","type","text","matInput","","required",""],["formControlName","email","type","email","matInput","","required",""],["formControlName","password","type","password","matInput","","required",""],["formControlName","confirmPassword","type","password","matInput","","required",""],["mat-stroked-button","",3,"click"],[1,"flex","justify-content-end","mt-5"],["routerLink","/auth/login"]],template:function(e,n){e&1&&(o(0,"form",0),f("submit",function(){return n.register()}),o(1,"h1",1),a(2,"Register"),t(),o(3,"mat-form-field")(4,"mat-label"),a(5,"User Name"),t(),m(6,"input",2),t(),o(7,"mat-form-field")(8,"mat-label"),a(9,"Last Name"),t(),m(10,"input",3),t(),o(11,"mat-form-field")(12,"mat-label"),a(13,"Email"),t(),m(14,"input",4),t(),o(15,"mat-form-field")(16,"mat-label"),a(17,"Password"),t(),m(18,"input",5),t(),o(19,"mat-form-field")(20,"mat-label"),a(21,"Confirm Password"),t(),m(22,"input",6),t(),o(23,"button",7),f("click",function(){return n.register()}),a(24,"Register"),t(),o(25,"div",8)(26,"a",9),a(27,"You already have an account?"),t()()()),e&2&&N("formGroup",n.registerForm)},dependencies:[I,H,E,M,P,w,_,F,Q,L,R,S],encapsulation:2})};var le=[{path:"",component:j,children:[{path:"login",component:T},{path:"register",component:D},{path:"**",redirectTo:"login"}]}],O=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=y({type:i});static \u0275inj=C({imports:[U.forChild(le),U]})};var re=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=y({type:i});static \u0275inj=C({imports:[$,X,W,O]})};export{d as a,re as b};
